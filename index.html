<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–í–î'26 - –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @font-face {
            font-family: Archive Ukr;
            src: url(ArchiveUkr.ttf);
        }
        .main {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .elipse {
            position: relative;
            display: inline-block;
            text-align: center;
        }
        .btn_grid { margin-top: 30px; }
        .buttons {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 15px;
        }
        button {
            background: rgba(255,255,255,0.2);
            color: white;
            width: 45%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-family: 'Archive Ukr';
            font-size: 16px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        button:hover { background: rgba(255,255,255,0.3); transform: scale(1.05); }
        .person {
            position: absolute;
            left: 50%;
            top: 25%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
        }
        .person img { width: 100%; height: 100%; object-fit: contain; }
        .text { font-family: 'Archive Ukr'; }
        .progress { 
            background: rgba(255,255,255,0.2); 
            height: 8px; 
            border-radius: 4px; 
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: #4CAF50;
            transition: width 0.5s ease;
        }
        #user-data {
            position: fixed;
            top: 10px;
            right: 10px;
            color: white;
            font-family: 'Archive Ukr';
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="user-data"></div>
    <div id="mainApp" class="main">
        <div class="elipse">
            <div style="position: relative;">
                <img src="Ellipse 6.svg" alt="Ellipse" style="width: 300px; height: 300px;"/>
                <img class="person" src="freepik__pixel-art-fulllength-child-wearing-a-unicorn-hat-o__30059 1.svg" alt="Person"/>
            </div>
            <div class="progress">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
            </div>
            <div class="btn_grid">
                <div class="buttons">
                    <button class="text" onclick="showModal('–î—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å')">ü§ù –î—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å</button>
                    <button class="text" onclick="showModal('–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç')">üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</button>
                </div>
                <div class="buttons">
                    <button class="text" onclick="showModal('–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å')">‚ö° –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
                    <button class="text" onclick="showModal('–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç')">üå± –†–æ—Å—Ç</button>
                </div>
            </div>
            <button class="text" onclick="showModal('–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ')" style="width: 100%; margin-top: 10px;">üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</button>
            <div id="progressText" style="color: white; font-family: 'Archive Ukr'; margin-top: 10px; font-size: 18px;"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        const user = tg.initDataUnsafe.user;
        document.getElementById('user-data').textContent = user ? `${user.first_name}!` : '–ì–æ—Å—Ç—å';

        const tasks = {
            "–î—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å": {
                "–ü—Ä–æ–≥—É–ª—è—Ç—å—Å—è —Å —á–µ–ª–æ–≤–µ–∫–æ–º –∏–∑ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥—ã": "–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Å—è –Ω–∞ –ø—Ä–æ–≥—É–ª–∫–µ —Å –∫–µ–º-—Ç–æ –∏–∑ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥—ã! üì∏",
                "–ê–Ω–∫–µ—Ç–∞ –ª—É—á—à–µ–π –ø–æ–¥—Ä—É–∂–∫–∏ —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º": "–£–∑–Ω–∞–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç, –î–† –∏ –∏—Å—Ç–æ—Ä–∏—é –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞ —É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞! üìù", 
                "–†–µ—Å–ø–µ–∫—Ç —É—á–∞—Å—Ç–Ω–∏–∫—É –∫–æ–º–∞–Ω–¥—ã": "–ü–æ—Ö–≤–∞–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã –∑–∞ —á—Ç–æ-—Ç–æ –∫—Ä—É—Ç–æ–µ! üí¨",
                "–ü–µ—Ä–µ–∫—É—Å –ø–æ —Ü–≤–µ—Ç–∞–º": "–°–¥–µ–ª–∞–π—Ç–µ —Å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –≤–∫—É—Å–Ω—è—à–∫–∏ –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞! üç¨",
                "–ü–∞—Ä–Ω—ã–π –∫–æ—Å—Ç—é–º": "–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å –∫–µ–º-—Ç–æ –ø–∞—Ä–Ω—ã–µ –∫–æ—Å—Ç—é–º—ã! üëóüëî"
            },
            "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç": {
                "1-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤": "–í—ã–ø–æ–ª–Ω–∏ –ø–µ—Ä–≤–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –æ—Ç–ª–∏—á–Ω–æ! üìö",
                "2-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤": "–í—Ç–æ—Ä–æ–µ –î–ó —Ç–æ–∂–µ –Ω–∞ –æ—Ç–ª–∏—á–Ω–æ! üìñ", 
                "3-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤": "–¢—Ä–µ—Ç—å–µ –î–ó –±–µ–∑ –æ—à–∏–±–æ–∫! ‚úèÔ∏è",
                "4-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤": "–ß–µ—Ç–≤–µ—Ä—Ç–æ–µ –Ω–∞ –≤—ã—Å—à–∏–π –±–∞–ª–ª! üìò",
                "5-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤": "–í—Å–µ –î–ó —Å–¥–µ–ª–∞–Ω—ã –∏–¥–µ–∞–ª—å–Ω–æ! üéì"
            },
            "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å": {
                "–¢–∞–Ω—Ü—ã –Ω–∞ —Å—Ü–µ–Ω–µ": "–ü–æ—Ç–∞–Ω—Ü—É–π –Ω–∞ —Å—Ü–µ–Ω–µ –∏–ª–∏ –∑–∞—Ä—è–¥–∫–µ! üíÉüï∫",
                "–ò–≥—Ä–∞ —Å –∑–∞–ª–æ–º": "–ü—Ä–æ–≤–µ–¥–∏ –∏–≥—Ä—É –¥–ª—è –≤—Å–µ—Ö! üéÆ",
                "–ú–∏–Ω–∏-—Å—é—Ä–ø—Ä–∏–∑ –¥–ª—è –∑–∞–ª–∞": "–ü–æ—Ä–∞–¥—É–π –≤—Å–µ—Ö —á–µ–º-—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º! üéÅ",
                "–ü–æ–±–µ–¥–∞ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏": "–í—ã–∏–≥—Ä–∞–π –≤ –∫–æ–Ω–∫—É—Ä—Å–µ –∏–ª–∏ –∏–≥—Ä–µ! üèÜ",
                "3 –∫—Ä—É–∂–∫–∞ –æ –¥–Ω–µ": "–†–∞—Å—Å–∫–∞–∂–∏ –≤ —á–∞—Ç–µ –æ —Å–≤–æ–µ–º –¥–Ω–µ! üì±"
            },
            "–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç": {
                "3 –∏–≥—Ä—ã –Ω–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ": "–ü—Ä–∏–¥—É–º–∞–π 3 –∏–≥—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –¥–µ—Ç–µ–π! üé≤",
                "–†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞": "–†–µ—à–∏ –∫–µ–π—Å –ø—Ä–æ —Å—Å–æ—Ä—É 7-–ª–µ—Ç–Ω–∏—Ö –¥–µ—Ç–µ–π! ü§ù",
                "–í–æ–ø—Ä–æ—Å —Å–ø–∏–∫–µ—Ä—É": "–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å —Å–ø–∏–∫–µ—Ä—É –Ω–∞ –ª–µ–∫—Ü–∏–∏! ‚ùì",
                "–í—Å—Ç—Ä–µ—á–∞ —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º": "–°—Ñ–æ—Ç–∫–∞–π—Å—è —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º –≤–Ω–µ –∑–∞–Ω—è—Ç–∏–π! üì∏",
                "–¢–∞–π–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞": "–£–∑–Ω–∞–π —Ç–∞–π–Ω—É –æ–¥–Ω–æ–≥–æ –∏–∑ –Ω–∞—Å! ü§´"
            },
            "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ": {
                "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ": "–°–Ω–∏–º–∏ —Ä–∏–ª—Å/—Ç–∏–∫—Ç–æ–∫ —Å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º! üé• #–®–í–î26",
                "–ö–æ—Å–ø–ª–µ–π –º–µ–º–∞": "–ó–∞–∫–æ—Å–ø–ª–µ–π —Å–≤–æ–π –ª—é–±–∏–º—ã–π –º–µ–º! üòÇ",
                "2 –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —à—É—Ç–∫–∏": "–ü—Ä–∏–¥—É–º–∞–π —à—É—Ç–∫–∏ –¥–ª—è –¥–µ—Ç–µ–π! üòÑ",
                "–ö—Ä—É—Ç–æ–π –∫–æ—Å—Ç—é–º": "–ü—Ä–∏–¥–∏ –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ –≤ –∫–æ—Å—Ç—é–º–µ! üé≠",
                "–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞": "–°–¥–µ–ª–∞–π –∞–≤–∞—Ç–∞—Ä–∫—É –®–í–î'26! üñºÔ∏è"
            }
        };

        // TASK CODES –¥–ª—è –±–æ—Ç–∞
        const TASK_CODES = {
            "11": "–ü—Ä–æ–≥—É–ª—è—Ç—å—Å—è —Å —á–µ–ª–æ–≤–µ–∫–æ–º –∏–∑ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥—ã",
            "12": "–ê–Ω–∫–µ—Ç–∞ –ª—É—á—à–µ–π –ø–æ–¥—Ä—É–∂–∫–∏ —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º", 
            "13": "–†–µ—Å–ø–µ–∫—Ç —É—á–∞—Å—Ç–Ω–∏–∫—É –∫–æ–º–∞–Ω–¥—ã",
            "14": "–ü–µ—Ä–µ–∫—É—Å –ø–æ —Ü–≤–µ—Ç–∞–º",
            "15": "–ü–∞—Ä–Ω—ã–π –∫–æ—Å—Ç—é–º",
            "21": "1-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤",
            "22": "2-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤",
            "23": "3-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤",
            "24": "4-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤",
            "25": "5-–µ –î–ó > 70 –±–∞–ª–ª–æ–≤",
            "31": "–¢–∞–Ω—Ü—ã –Ω–∞ —Å—Ü–µ–Ω–µ",
            "32": "–ò–≥—Ä–∞ —Å –∑–∞–ª–æ–º",
            "33": "–ú–∏–Ω–∏-—Å—é—Ä–ø—Ä–∏–∑ –¥–ª—è –∑–∞–ª–∞",
            "34": "–ü–æ–±–µ–¥–∞ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏",
            "35": "3 –∫—Ä—É–∂–∫–∞ –æ –¥–Ω–µ",
            "41": "3 –∏–≥—Ä—ã –Ω–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ",
            "42": "–†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞",
            "43": "–í–æ–ø—Ä–æ—Å —Å–ø–∏–∫–µ—Ä—É",
            "44": "–í—Å—Ç—Ä–µ—á–∞ —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º",
            "45": "–¢–∞–π–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞",
            "51": "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ",
            "52": "–ö–æ—Å–ø–ª–µ–π –º–µ–º–∞",
            "53": "2 –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —à—É—Ç–∫–∏",
            "54": "–ö—Ä—É—Ç–æ–π –∫–æ—Å—Ç—é–º",
            "55": "–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞"
        };

        function updateProgress() {
            const userId = tg.initDataUnsafe.user?.id || 'test';
            let totalDone = 0, totalTasks = 0;
            
            Object.keys(tasks).forEach(category => {
                const completedKey = `completed_${userId}_${category.toLowerCase()}`;
                const completed = JSON.parse(localStorage.getItem(completedKey) || '[]');
                totalDone += completed.length;
                totalTasks += Object.keys(tasks[category]).length;
            });
            
            const progress = totalTasks ? (totalDone / totalTasks) * 100 : 0;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${Math.round(totalDone)}/${totalTasks} –∑–∞–¥–∞–Ω–∏–π`;
        }

        function openCuratorChat(category, taskName, taskCode, index) {
            const curatorUsername = 'mary_vii';
            const userId = tg.initDataUnsafe.user?.id || 'test';
            const userName = tg.initDataUnsafe.user?.first_name || '–ì–æ—Å—Ç—å';
            
            const message = `üë§ <b>${userName}</b> (ID: <code>${userId}</code>)\nüìÇ <b>${category}</b>\nüî¢ <b>${taskCode}</b>\nüìã <b>${taskName}</b>\n\n#–®–í–î26`;
            
            const telegramLink = `https://t.me/${curatorUsername}?text=${encodeURIComponent(message)}`;
            document.querySelector('.modal-overlay')?.remove();
            Telegram.WebApp.openTelegramLink(telegramLink);
        }

        window.toggleTask = function(index) {
            const desc = document.getElementById(`task-desc-${index}`);
            const header = document.querySelector(`.task-header-${index}`);
            if (desc.style.maxHeight === '0px' || !desc.style.maxHeight) {
                desc.style.maxHeight = desc.scrollHeight + 'px';
                header.querySelector('span').textContent = '‚ñ≤';
            } else {
                desc.style.maxHeight = '0px';
                header.querySelector('span').textContent = '‚ñº';
            }
        };

        async function showModal(category) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position:fixed;top:0;left:0;width:100%;height:100%;
                background:rgba(0,0,0,0.7);z-index:9999;display:flex;
                justify-content:center;align-items:center;padding:20px;
            `;
            
            const userId = tg.initDataUnsafe.user?.id || 'test';
            const completedKey = `completed_${userId}_${category.toLowerCase()}`;
            const completedTasks = JSON.parse(localStorage.getItem(completedKey) || '[]');
            const allTasks = tasks[category] || {};
            
            let tasksHTML = '';
            let taskIndex = 0;
            Object.entries(allTasks).forEach(([taskName, desc]) => {
                const taskCode = Object.keys(TASK_CODES).find(code => TASK_CODES[code] === taskName) || `${taskIndex + 1}`;
                const isCompleted = completedTasks.includes(taskName);
                
                if (!isCompleted) {
                    tasksHTML += `
                        <div style="margin-bottom:15px;background:white;border-radius:15px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.1);">
                            <div onclick="toggleTask(${taskIndex})" class="task-header-${taskIndex}" style="
                                padding:20px;cursor:pointer;background:linear-gradient(135deg,#A099F6,#5F33E1);
                                color:white;font-weight:bold;font-size:18px;user-select:none;
                            ">
                                üìã ${taskName}
                                <span style="float:right;font-size:16px;">‚ñº</span>
                            </div>
                            <div id="task-desc-${taskIndex}" style="
                                max-height:0;overflow:hidden;transition:all 0.4s ease;
                                background:white;color:#333;padding:0;
                            ">
                                <div style="padding:20px;line-height:1.6;font-size:16px;">${desc}</div>
                                <button onclick="openCuratorChat('${category}', '${taskName.replace(/'/g, "\\'")}', '${taskCode}', ${taskIndex})"
                                    style="width:100%;padding:15px;background:linear-gradient(135deg,#FF6B6B,#FF8E8E);color:white;border:none;border-radius:0 0 15px 15px;font-weight:bold;font-size:16px;">
                                    üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—É—Ä–∞—Ç–æ—Ä—É (${taskCode})
                                </button>
                            </div>
                        </div>
                    `;
                }
                taskIndex++;
            });
            
            if (tasksHTML === '') {
                tasksHTML = '<div style="padding:60px;text-align:center;background:white;border-radius:20px;"><h2 style="color:#4CAF50;">üéâ –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</h2></div>';
            }
            
            modal.innerHTML = `
                <div style="
                    background:white;border-radius:20px;width:95%;max-height:85%;max-width:500px;
                    padding:0;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,0.3);
                ">
                    <div style="background:linear-gradient(135deg,#A099F6,#5F33E1);padding:25px;color:white;">
                        <div style="display:flex;justify-content:space-between;align-items:center;">
                            <h1 style="margin:0;font-size:28px;font-family:'Archive Ukr';">${category}</h1>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                                padding:10px 15px;background:rgba(255,255,255,0.3);color:white;border:none;border-radius:50%;cursor:pointer;font-size:24px;font-weight:bold;width:50px;height:50px;
                            ">‚úï</button>
                        </div>
                        <div style="height:3px;background:rgba(255,255,255,0.3);margin-top:15px;"></div>
                    </div>
                    <div style="padding:20px;overflow:auto;height:calc(100% - 120px);">${tasksHTML}</div>
                </div>
            `;
            
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => e.target === modal && modal.remove());
            updateProgress();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateProgress();
        tg.MainButton.setText('üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞').onClick(updateProgress).show();
    </script>
</body>
</html>
