<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini App Example</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>

        @font-face {
            font-family: Archive Ukr;
            src: url(ArchiveUkr.ttf);
        }
        .main {
            background-color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .elipse {
            position: relative;
            display: inline-block;
            justify-content: center;

        }
        .btn_grid{
        }
        .buttons{
            display: flex;
            justify-content: space-between;
            gap:20%;
        }

        button{
            background-color: #A099F6;
            color: white;
            width:40%;
            flex: 1 0 auto;
            padding:0 10px;
            border: 0px solid;
            border-radius: 10px;
        }

        .person {
            position: absolute;
            left: 50%;
            top:30%;
            transform: translate(-50%, -50%); /* Центрирует точно по центру */
        }

        .person img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .text{
            font-family: Archive Ukr;
        }
    </style>
</head>
<body>
    <div id="mainApp" class="main">
        <div class="elipse">
            <div>
                <img src="Ellipse 6.svg" alt="Ellipse"/>
                <img class="person" src="freepik__pixel-art-fulllength-child-wearing-a-unicorn-hat-o__30059 1.svg" alt="Person"/>
            </div>
            <div class="btn_grid">
                <div class="buttons">
                    <button class="text" onclick="showModal()">Дружелюбность</button>
                    <button class="text" onclick="showModal()">Интеллект</button>
                </div>
                <div class="buttons">
                    <button class="text" onclick="showModal()">Активность</button>
                    <button class="text" onclick="showModal()">Личностный рост</button>
                </div>
            </div>
            <button class="text" onclick="showModal()">Творчество</button>
            <span id="user-data"></span>
        </div>


    </div>

    <script>
        const tg = window.Telegram.WebApp;
        document.getElementById('user-data').textContent = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.first_name : 'Неизвестно';
        tg.expand();
        window.toggleTask = function(index) {
            const desc = document.getElementById(`task-desc-${index}`);
            const header = document.querySelector(`.task-header-${index}`);

            if (desc.style.maxHeight === '0px' || !desc.style.maxHeight) {
                desc.style.maxHeight = desc.scrollHeight + 'px';
                header.querySelector('span').textContent = '▲';
            } else {
                desc.style.maxHeight = '0px';
                header.querySelector('span').textContent = '▼';
            }
        };
        const tasks = {
  "Личностный рост": {
    "Написать 3 игры на вторичное знакомство": "Подробно распиши 3 любые игры, которые помогут детям быстро и весело закрепить знания имен друг друга. ",
    "Написать решение кейса": "Твоим детям по 7 лет. Двое ребят в отряде поссорились из‑за того, кто будет ведущим в игре.",
    "Задать 1 вопрос в течение лекции спикеру (по делу, без шуток)": "Действительно ли ты слушаешь спикера или только притворяешься? Задай ему вопрос по теме и пришли голосовое сообщение с его ответом в подтверждение.",
    "Встретиться с куратором вне занятия": "Говорят, кураторы вас постоянно куда-то зовут. Хотим увидеть на фотографии, как круто вы проводите время.",
    "Узнать тайну одного из организаторов": "У каждого из нас есть своя тайна. Хочешь ее узнать? Попробуй пообщаться с нами. В подтверждение пришли тайну текстом."
  },
  "Активность": {
    "Выбраться танцевать на сцену": "Может быть вы с командой подготовите крутой номер, где ты будешь танцевать? А может быть спросишь у организаторов и присоединишься на зарядку? В общем, пришли видео.",
    "Провести игру с залом на занятии": "Уточни у куратора, когда это можно сделать, но знай – количество возможностей ограничено. Не забудь попросить друга заснять этот момент.",
    "Подготовить мини-сюрприз для всех присутствующих на занятии": "Подумай, чем ты можешь порадовать абсолютно всех присутствующих? Важное условие – это должно стоить 0 рублей. Скинь фото-подтверждение",
    "Одержать победу в одном из мероприятий, проходящих на занятии": "Мы уверены, у тебя это точно получится! Сфотографируй и отправь грамоту, которую получишь за победу. (это может быть и командная победа).",
    "Записать в общую беседу 3 кружка о том, как проходит твой день": "Нам действительно интересно, чем ты живешь вне занятий. Перешли эти кругляши потом сюда."
  },
  "Дружелюбность": {
    "Где-то прогуляться с человеком из другой команды": "Время знакомиться с новыми людьми! А что может быть проще, чем прогулка? Кстати, пришли нам фото-подтверждение.",
    "Заполнить анкету лучшей подружки с одним из организаторов": "Выбери любого организатора и узнай: какой у него любимый цвет; когда у него день рождения; его смешную историю из детства. Пришли нам его ответы, но знай, у него тоже должны быть твои ответы на эти вопросы.",
    "Кинуть респект улиц одному из участников твоей команды": "Выбери одного из участников твоей команды, когда почувствуешь, что он ультра хорош. Отправь нам его ник в тг.",
    "Устроить перекус по цветам с любым из участников": "Знаешь модные видео из тик-тока, где друзья покупают друг другу вкусняшки по цветам? Сделай также с любым из участников на перекусе, а потом вместе отправьте фото, что у вас получилось.",
    "Сделать парный костюм с любым из участников": "Умение делать парные костюмы очень пригодиться на смене. Единственное отличие – сейчас ты можешь выбрать себе напарника самостоятельно. Скиньте нам свои фотки."
  },
  "Интеллект": {
    "Получить за выполнение первого домашнего задания более 70 баллов" : "Просто сделай это! Мы уверены, у тебя получится! Кстати, его можно переписывать, если не получается с первого раза...",
    "Получить за выполнение второго домашнего задания более 70 баллов" : "Просто сделай это! Мы уверены, у тебя получится! Кстати, его можно переписывать, если не получается с первого раза...",
    "Получить за выполнение третьего домашнего задания более 70 баллов" : "Просто сделай это! Мы уверены, у тебя получится! Кстати, его можно переписывать, если не получается с первого раза...",
    "Получить за выполнение четвертого домашнего задания более 70 баллов" : "Просто сделай это! Мы уверены, у тебя получится! Кстати, его можно переписывать, если не получается с первого раза...",
    "Получить за выполнение пятого домашнего задания более 70 баллов" : "Просто сделай это! Мы уверены, у тебя получится! Кстати, его можно переписывать, если не получается с первого раза..."
  },
  "Творчество": {
    "Снять вертикальное видео с одним из участников" : "Рилс? Тики-ток? ВК-клип? Что хотите, главное – пришлите нам его на оценку. Не забудь указать в описании его – #ШВД26",
    "Сделать фотографию-косплей на любой мем" : "Какой твою любимый мем? Давай ты закосплеишь его и пришлешь нам, а еще можно дополнительно скинуть его в общий чатикс на оценку.",
    "Придумать 2 педагогические шутки" : "Ты уже почти педагог. Подумай, над чем они смеются. Напиши нам текстовые 2 шутеечки, чтобы мы тоже посмеялись.",
    "Отличиться костюмом на занятии" : "Помни – умение делать костюм реально важное в вожатском мире. Сделай самый крутой в мире костюм, приди в нем на занятие и скинь нам фотку.",
    "Сделать тематическую аватарку и установить ее в профиль на неделю" : "Видел у организаторов стоят общие тематические аватарки? Ты же тоже так сможешь! Главное – присутствие надписи «ШВД’26» и скинуть ее нам, конечно же."
  }
};

        // Функция модалки
        function showModal(category) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position:fixed;top:0;left:0;width:100%;height:100%;
                background:rgba(0,0,0,0.5);z-index:9999;display:flex;
                justify-content:center;align-items:center;
            `;

            modal.innerHTML = `
                <div style="
                    background:#A099F6;border-radius:15px;width:90%;max-height:80%;
                    padding:20px;overflow:auto;color:white;font-family:'Archive Ukr';
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h1 style="margin: 0;">${category}</h1>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()"
                            style="padding: 5px; display: inline-block; background: white; color: #AFCB6F; border: none; border-radius: 100px; cursor: pointer; font-size: 24px; max-width:10%; font-weight: bold">
                            X
                        </button>
                    </div>

                    <div style="background-color: white; height: 2px; margin-bottom:10px" ></div>
                        ${Object.entries(tasks[category]).map(([name, desc], index) => `
                            <div style="margin-bottom:15px;background:white;border-radius:10px;overflow:hidden;">
                                <div onclick="toggleTask(${index})" style="
                                    padding:15px;cursor:pointer;background:white;
                                    color:#A099F6;font-weight:bold;font-size:18px;user-select:none;
                                " class="task-header-${index}">
                                    ${name}
                                    <span style="float:right;font-size:14px;">▼</span>
                                </div>

                                <!-- Скрытое описание -->
                                <div id="task-desc-${index}" style="
                                    max-height:0;overflow:hidden;transition:max-height 0.3s ease;
                                    background:white;color:#666;padding:0 20px 5px;
                                ">
                                    <div style="line-height:1.5;padding-top:15px;">${desc}</div>
                                    <button onclick="Telegram.WebApp.openTelegramLink('https://t.me/mary_vii')"
                                        style="margin-top:15px;width:100%;padding:12px;background:#EDE8FF;color:#5F33E1;border:none;border-radius:10px;font-weight:bold;">
                                        Отправить задание
                                    </button>
                                </div>
                            </div>
                        `).join('')}

                </div>
            `;

            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();  // Полностью убирает overlay
                }
            });
        }

        // Обработчики
        document.querySelectorAll('button.text').forEach(button => {
            const category = button.textContent.trim();
            button.onclick = () => showModal(category);
        });
        </script>


</body>
</html>
